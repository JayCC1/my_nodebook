<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>canvas - ç»˜åˆ¶ - transform</title>
    <style>
      /* ç»™ç”»å¸ƒå¢åŠ ä¸€ä¸ªé˜´å½±å’Œåœ†è§’çš„æ ·å¼ */
      canvas {
        box-shadow: 0px 0px 5px #ccc;
        border-radius: 8px;
      }
    </style>
  </head>
  <body>
    <canvas id="canvas" width="500" height="500">
      å½“å‰æµè§ˆå™¨ä¸æ”¯æŒ canvas å…ƒç´ ï¼Œè¯·å‡çº§æˆ–æ›´æ¢æµè§ˆå™¨
    </canvas>
    <script>
      // è·å– canvas å…ƒç´ 
      const canvas = document.getElementById("canvas");
      // é€šè¿‡åˆ¤æ–­ getContext æ–¹æ³•æ˜¯å¦å­˜åœ¨æ¥åˆ¤æ–­æµè§ˆå™¨çš„æ”¯æŒæ€§
      if (canvas.getContext) {
        // è·å–ç»˜å›¾ä¸Šä¸‹æ–‡
        const ctx = canvas.getContext("2d");

        const sin = Math.sin(Math.PI / 6);
        const cos = Math.cos(Math.PI / 6);

        console.log("ğŸš€ ~ cosï¼Œsin", cos, sin);
        ctx.translate(250, 250);

        let c = 0;
        for (let i = 0; i <= 12; i++) {
          c = Math.floor((255 / 12) * i);
          ctx.fillStyle = `rgba(${c},${c},${c})`;
          ctx.beginPath(); // å¼€å¯è·¯å¾„
          ctx.arc(60, 100, 100, 0, Math.PI * 2, false);
          ctx.fill();
          /**
           * å‚æ•°è¯´æ˜ï¼š
           *  - aï¼šæ°´å¹³æ–¹å‘çš„ç¼©æ”¾
           *  - bï¼šç«–ç›´æ–¹å‘çš„å€¾æ–œåç§»
           *  - cï¼šæ°´å¹³æ–¹å‘çš„å€¾æ–œåç§»
           *  - dï¼šç«–ç›´æ–¹å‘çš„ç¼©æ”¾
           *  - eï¼šæ°´å¹³æ–¹å‘çš„ç§»åŠ¨
           *  - fï¼šç«–ç›´æ–¹å‘çš„ç§»åŠ¨
           * */
          ctx.transform(cos, sin, -sin, cos, 0, 0);
        }

        ctx.fillStyle = "rgba(255, 128, 255, 0.5)";
        ctx.fillRect(0, 50, 100, 100);
        // ä¸Šé¢ç»˜åˆ¶çš„çŸ©å½¢ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ²¡å› ä¸ºå®ƒå¸¦ä¸Šäº†ä¸Šé¢transformçš„å±æ€§
        // æ‰€ä»¥éœ€è¦é‡ç½®å½“å‰å˜å½¢ä¸ºå•ä½çŸ©é˜µ
        ctx.resetTransform();
        ctx.fillStyle = "rgba(255, 128, 255, 0.5)";
        ctx.fillRect(0, 50, 100, 100);
      }
    </script>
  </body>
</html>
