# rollup 

## plugin 自定义插件开发

#### 插件 执行周期钩子

| rollup插件执行钩子 | 描述                                                       | 入参                                                         |
| ------------------ | ---------------------------------------------------------- | ------------------------------------------------------------ |
| **options**        | 在加载配置选项之前调用，可以用来修改配置选项               | `options`: 包含配置选项的对象，可以在这里修改配置选项。      |
| **buildStart**     | 在开始构建过程之前调用，可以用于执行一些初始化操作         | `inputOptions`: 包含输入选项的对象。                         |
| **resolveId**      | 在解析模块标识符时调用，可以用来指定如何解析依赖的模块     | `source`: 要解析的模块标识符。<br /> `importer`: 导入模块的模块标识符。 |
| **load**           | 在加载模块时调用，可以用来自定义模块加载的过程             | `id`: 要加载的模块标识符。<br />**注意：**<br />1.如果这时候执行 ``readFile(id, 'utf-8')`` 类似操作，那么那么 `id` 将是相对于当前正在加载的模块的路径<br />2.如果你想相对于项目根目录来读取文件，你可能需要使用 `path` 模块将相对路径转换为绝对路径。<br />） |
| **transform**      | 在转换代码之前调用，可以用于对代码进行自定义的转换         | `code`: 要转换的代码字符串。<br /> `id`: 模块的标识符。      |
| **buildEnd**       | 在构建过程结束时调用，可以用于执行一些清理操作             | 无                                                           |
| **renderStart**    | 在开始渲染输出文件之前调用，可以用于执行一些初始化操作     | `outputOptions`: 输出选项的对象。                            |
| **generateBundle** | 在生成输出文件束（bundle）时调用，可以用于自定义生成的文件 | `outputOptions`: 输出选项的对象。 <br />`bundle`: 包含生成的文件的对象，可以在这里对生成的文件进行自定义处理。 |
| **banner**         | 在生成的输出文件的开头添加一个注释或者头部信息             | 无                                                           |
| **footer**         | 在生成的输出文件的末尾添加一个注释或者尾部信息             | 无                                                           |
| **intro**          | 在输出文件的模块之前插入一段代码                           | 无                                                           |
| **outro**          | 在输出文件的模块之后插入一段代码                           | 无                                                           |
| **watchChange**    | 在监听模式下，当文件发生变化时调用                         | `id`: 发生变化的模块的标识符。                               |
| **moduleParsed**   | 在解析模块完成后调用                                       | `module`: 解析完成的模块对象。                               |
| **renderChunk**    | 在渲染单个 chunk 时调用                                    | `code`: 渲染后的代码字符串。 <br />`chunk`: 当前渲染的 chunk 对象。 |
| **writeBundle**    | 在将 bundle 写入文件系统时调用                             | `outputOptions`: 输出选项的对象。<br /> `bundle`: 包含生成的文件的对象。 |

